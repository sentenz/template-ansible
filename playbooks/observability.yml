# SPDX-License-Identifier: Apache-2.0
---
- name: Observability - Setup Container (Docker)
  hosts: observability
  become: true
  roles:
    - role: sentenz.container.docker

- name: Observability - Setup Prometheus/Grafana with Reverse Proxy (Traefik)
  hosts: observability
  become: true
  roles:
    - role: sentenz.observability.prometheus.prometheus
    - role: sentenz.observability.prometheus.alertmanager
    - role: sentenz.observability.grafana.grafana
    - role: sentenz.observability.grafana.loki
    - role: sentenz.reverse_proxy.traefik
    # TODO
    # - role: sentenz.observability.grafana.tempo

- name: Observability - Setup Agents/Collectors in Observability
  hosts: observability
  become: true
  roles:
    - role: sentenz.observability.prometheus.node_exporter
    - role: sentenz.observability.grafana.promtail
    # TODO
    # - role: sentenz.observability.prometheus.blackbox_exporter
    # - role: sentenz.observability.grafana.alloy

- name: Observability - Setup Agents/Collectors in Component Analysis
  hosts: component_analysis
  become: true
  roles:
    - role: sentenz.observability.prometheus.node_exporter
    - role: sentenz.observability.grafana.promtail
    # TODO
    # - role: sentenz.observability.prometheus.blackbox_exporter
    # - role: sentenz.observability.grafana.alloy
